<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0dev, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This file documents the use of the GNU compilers.

Copyright Â© 1988-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Funding Free Software", the Front-Cover
Texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
"GNU Free Documentation License".

(a) The FSF's Front-Cover Text is:

A GNU Manual

(b) The FSF's Back-Cover Text is:

You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development. -->
<title>C++98 Thread-Local Edits (Using the GNU Compiler Collection (GCC))</title>

<meta name="description" content="C++98 Thread-Local Edits (Using the GNU Compiler Collection (GCC))">
<meta name="keywords" content="C++98 Thread-Local Edits (Using the GNU Compiler Collection (GCC))">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Indices.html" rel="index" title="Indices">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Thread_002dLocal.html" rel="up" title="Thread-Local">
<link href="C99-Thread_002dLocal-Edits.html" rel="prev" title="C99 Thread-Local Edits">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
ul.mark-bullet {list-style-type: disc}
-->
</style>
<link rel="stylesheet" type="text/css" href="/texinfo-manuals.css">


</head>

<body lang="en_US">
<div class="subsection-level-extent" id="C_002b_002b98-Thread_002dLocal-Edits">
<div class="nav-panel">
<p>
Previous: <a href="C99-Thread_002dLocal-Edits.html" accesskey="p" rel="prev">ISO/IEC 9899:1999 Edits for Thread-Local Storage</a>, Up: <a href="Thread_002dLocal.html" accesskey="u" rel="up">Thread-Local Storage</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Indices.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="ISO_002fIEC-14882_003a1998-Edits-for-Thread_002dLocal-Storage"><span>6.66.2 ISO/IEC 14882:1998 Edits for Thread-Local Storage<a class="copiable-link" href="#ISO_002fIEC-14882_003a1998-Edits-for-Thread_002dLocal-Storage"> &para;</a></span></h4>

<p>The following are a set of changes to ISO/IEC 14882:1998 (aka C++98)
that document the exact semantics of the language extension.
</p>
<ul class="itemize mark-bullet">
<li><b class="b">[intro.execution]</b>

<p>New text after paragraph 4
</p>
<blockquote class="quotation">
<p>A <em class="dfn">thread</em> is a flow of control within the abstract machine.
It is implementation defined whether or not there may be more than
one thread.
</p></blockquote>

<p>New text after paragraph 7
</p>
<blockquote class="quotation">
<p>It is unspecified whether additional action must be taken to
ensure when and whether side effects are visible to other threads.
</p></blockquote>

</li><li><b class="b">[lex.key]</b>

<p>Add <code class="code">__thread</code>.
</p>
</li><li><b class="b">[basic.start.main]</b>

<p>Add after paragraph 5
</p>
<blockquote class="quotation">
<p>The thread that begins execution at the <code class="code">main</code> function is called
the <em class="dfn">main thread</em>.  It is implementation defined how functions
beginning threads other than the main thread are designated or typed.
A function so designated, as well as the <code class="code">main</code> function, is called
a <em class="dfn">thread startup function</em>.  It is implementation defined what
happens if a thread startup function returns.  It is implementation
defined what happens to other threads when any thread calls <code class="code">exit</code>.
</p></blockquote>

</li><li><b class="b">[basic.start.init]</b>

<p>Add after paragraph 4
</p>
<blockquote class="quotation">
<p>The storage for an object of thread storage duration shall be
statically initialized before the first statement of the thread startup
function.  An object of thread storage duration shall not require
dynamic initialization.
</p></blockquote>

</li><li><b class="b">[basic.start.term]</b>

<p>Add after paragraph 3
</p>
<blockquote class="quotation">
<p>The type of an object with thread storage duration shall not have a
non-trivial destructor, nor shall it be an array type whose elements
(directly or indirectly) have non-trivial destructors.
</p></blockquote>

</li><li><b class="b">[basic.stc]</b>

<p>Add &ldquo;thread storage duration&rdquo; to the list in paragraph 1.
</p>
<p>Change paragraph 2
</p>
<blockquote class="quotation">
<p>Thread, static, and automatic storage durations are associated with
objects introduced by declarations [&hellip;].
</p></blockquote>

<p>Add <code class="code">__thread</code> to the list of specifiers in paragraph 3.
</p>
</li><li><b class="b">[basic.stc.thread]</b>

<p>New section before <b class="b">[basic.stc.static]</b>
</p>
<blockquote class="quotation">
<p>The keyword <code class="code">__thread</code> applied to a non-local object gives the
object thread storage duration.
</p>
<p>A local variable or class data member declared both <code class="code">static</code>
and <code class="code">__thread</code> gives the variable or member thread storage
duration.
</p></blockquote>

</li><li><b class="b">[basic.stc.static]</b>

<p>Change paragraph 1
</p>
<blockquote class="quotation">
<p>All objects that have neither thread storage duration, dynamic
storage duration nor are local [&hellip;].
</p></blockquote>

</li><li><b class="b">[dcl.stc]</b>

<p>Add <code class="code">__thread</code> to the list in paragraph 1.
</p>
<p>Change paragraph 1
</p>
<blockquote class="quotation">
<p>With the exception of <code class="code">__thread</code>, at most one
<var class="var">storage-class-specifier</var> shall appear in a given
<var class="var">decl-specifier-seq</var>.  The <code class="code">__thread</code> specifier may
be used alone, or immediately following the <code class="code">extern</code> or
<code class="code">static</code> specifiers.  [&hellip;]
</p></blockquote>

<p>Add after paragraph 5
</p>
<blockquote class="quotation">
<p>The <code class="code">__thread</code> specifier can be applied only to the names of objects
and to anonymous unions.
</p></blockquote>

</li><li><b class="b">[class.mem]</b>

<p>Add after paragraph 6
</p>
<blockquote class="quotation">
<p>Non-<code class="code">static</code> members shall not be <code class="code">__thread</code>.
</p></blockquote>
</li></ul>

</div>
<hr>
<div class="nav-panel">
<p>
Previous: <a href="C99-Thread_002dLocal-Edits.html">ISO/IEC 9899:1999 Edits for Thread-Local Storage</a>, Up: <a href="Thread_002dLocal.html">Thread-Local Storage</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Indices.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
